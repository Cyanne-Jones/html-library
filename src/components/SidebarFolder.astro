---
import type { PrototypeFolder } from '../lib/prototypes';

interface Props {
  folder: PrototypeFolder;
  currentSlug: string;
}

const { folder, currentSlug } = Astro.props;
const isActive = currentSlug.startsWith(folder.slug + '/');
---

<details class="folder" open={isActive}>
  <summary class="folder-name">
    <svg class="folder-icon" width="14" height="14" viewBox="0 0 16 16" fill="none">
      <path d="M6 4l4 4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    {folder.name}
    <span class="folder-count">{folder.files.length}</span>
  </summary>
  <ul class="file-list">
    {folder.files.map(file => (
      <li>
        <a
          href={`/view/${file.slug}`}
          class:list={['file-link', { active: currentSlug === file.slug }]}
        >
          {file.name}
        </a>
      </li>
    ))}
  </ul>
</details>
